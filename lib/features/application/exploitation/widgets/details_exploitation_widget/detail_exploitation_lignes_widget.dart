import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
 
import '../../../../../core/data/model/ObjectBox/objectBoxModels.dart';
import '../../../exploitation_charge_exploitation/widgets/ece_idProduitIdTypeChargeIdExploitation/bloc/ece_id_produit_id_type_charge_id_exploitation_bloc.dart';

class DetailExploitationLignesWidget extends StatelessWidget {
  const DetailExploitationLignesWidget({
    Key? key,
    required this.idProduit,
    required this.idTypeChargeExploitation,
    required this.idExploitation,
  }) : super(key: key);

  final int idProduit;
  final int idTypeChargeExploitation;
  final int idExploitation;

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<EceIdProduitIdTypeChargeIdExploitationBloc,
            EceIdProduitIdTypeChargeIdExploitationState>(
        builder: (context, stateECE) {
      BlocProvider.of<EceIdProduitIdTypeChargeIdExploitationBloc>(context).add(
          GenerateEceIdProduitIdTypeChargeIdExploitationEvent(
              idProduit: idProduit,
              idTypeChargeExploitation: idTypeChargeExploitation,
              idExploitation: idExploitation));

      List<MxExploitationChargeExploitationObject>
          listExploitationChargeExploitationObject =
          stateECE.exploitationChargeExploitations;

      return Column(
        children: <Widget>[
          for (var retour in listExploitationChargeExploitationObject)
            Text(
              '${retour.unite} | Qt√©: ${retour.quantite} PU: ${retour.pu} | Total: ${retour.valeur} |',
              style: const TextStyle(
                fontSize: 13,
                color: Colors.white,
              ),
            ),
          const SizedBox(
            height: 2,
          ),
          const Text(
            'TOTAUX: SOMME FCFA ',
            style: TextStyle(
                fontSize: 14, color: Colors.white, fontWeight: FontWeight.bold),
          ),
          Text(
            'IDPRODUIT: $idProduit IDTCE $idTypeChargeExploitation IDEX: $idExploitation NOMBRE: ${listExploitationChargeExploitationObject.length}',
            style: const TextStyle(
                fontSize: 14, color: Colors.white, fontWeight: FontWeight.bold),
          ),
          Text(
            'IDPRODUIT: ${stateECE.idProduit} IDTCE ${stateECE.idTypeChargeExploitation} IDEX: ${stateECE.idExploitation} NOMBRE: ${listExploitationChargeExploitationObject.length}',
            style: const TextStyle(
                fontSize: 14, color: Colors.white, fontWeight: FontWeight.bold),
          ),
        ],
      );
    });
  
  
  }
}
